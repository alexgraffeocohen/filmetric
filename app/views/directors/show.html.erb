<div class="row">
  <div class="col-md-4">
    <div id="item-data">
      <h1><%= @director.name %></h1>

      
      <span id="filmetric"><%= @director.filmetric %></span>

      <h2>Movies</h2>
      <ul>
        <% @director.movies.each do |movie| %>
          <% @average = ((movie.critics_score + movie.audience_score) / 2) %>
          <% if @average >= 75 %>
            <li><a class="good" href="<%= movie_path(movie.id) %>"><%= movie.title %> (<%= movie.release_year %>)</a></li>
          <% elsif @average.between?(50,75) %>
            <li><a class="ok" href="<%= movie_path(movie.id) %>"><%= movie.title %> (<%= movie.release_year %>)</a></li>
          <% elsif @average < 50 %>
            <li><a class="bad" href="<%= movie_path(movie.id) %>"><%= movie.title %> (<%= movie.release_year %>)</a></li>
          <% end %>
        <% end %>
      </ul>

    </div>
  </div>

  <div class="col-md-8">
    <div id="chart">
      <% @data = [].tap do |data| %>
        <% @director.movies.map do |movie| %> 
          <% data << [Time.new(movie.release_year), movie.filmetric] %>
        <% end %>
      <% end %>

     <%= line_chart @data, library: { tooltip: { trigger: 'none' }, title: "Movies by Filmetric" } %>
      
    </div>
  </div>

  <!-- <div id="image-container" class="col-md-4">
    <img src="http://<%= @director.name.delete("[],\"") %>.jpg.to/" width="80%" class="img-responsive">
  </div> -->
</div>